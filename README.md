# AI YouTube Manager

This repository contains a complete scaffold for an AI powered YouTube management application built with **Next.js 14 (App Router)**, **TypeScript**, **Tailwind CSS** and **Supabase**.  The goal is to give creators a single interface to connect their YouTube channel, analyse performance, schedule future uploads with custom tags and descriptions, and receive AI generated recommendations to help them grow subscribers and views.

The code in this repository is intentionally lightweight and modular.  All API calls to YouTube or OpenAI are encapsulated in dedicated services (in `lib/`), and the UI is composed of simple server components that can be customised and extended.  You will still need to supply your own API keys (see **Environment variables** below) and finish wiring up the business logic, but this scaffold gives you a solid starting point.

## Features

- **Authentication with Supabase** – secure user sign‑up/sign‑in and row‑level security for data isolation.
- **YouTube connection** – guides the user through Google OAuth to obtain a refresh token for the YouTube Data API and Analytics API.  The token is stored securely via Supabase's built‑in encrypted storage.
- **Dashboard** – displays a list of recently synced videos along with placeholder statistics (views, watch time, subscribers gained).  This page is ready to consume data returned from your YouTube sync service.
- **Content ideas & AI coach** – there are hooks for integrating OpenAI (or other LLMs) to generate next‑video ideas, titles, hooks, descriptions and tags based on your channel’s metrics.
- **Upload manager** – schedule new uploads or shorts to go live at a specific date/time.  The form captures a video file, title, description, tags and desired publish time.  The data is stored in the `scheduled_uploads` table and can be sent to the YouTube API via a background job when the scheduled time arrives.  This enables timed releases without leaving the web app.
- **Tasks page** – stores weekly or ad‑hoc tasks generated by the AI assistant (e.g. “Rewrite the title of Video X” or “Create three shorts from Video Y”).
- **Settings page** – connect/disconnect your YouTube channel, resync data, and manage account settings.

> **Note on automatic uploads**: To actually upload and schedule videos on YouTube you must call the [YouTube Data API's `videos.insert`](https://developers.google.com/youtube/v3/docs/videos/insert) endpoint with the `publishAt` property set.  The included server action `createScheduledUpload()` writes upload requests to the database.  You can implement a cron job (via Supabase scheduled functions or another job runner) that checks for records whose `publish_at` timestamp has passed and then calls the YouTube API using the stored refresh token.  This approach decouples the UI from the actual upload logic and keeps your refresh tokens safe.

## Getting started

1. **Install dependencies**

   ```bash
   npm install
   # or
   yarn install
   ```

2. **Create a Supabase project**

   - Head over to [supabase.com](https://supabase.com) and create a new project.
   - In the **SQL Editor**, run the contents of `db/schema.sql` to set up the required tables and policies.
   - Grab your **project URL** and **anon/public key** and copy them into `.env.local` (see below).

3. **Configure Google OAuth**

   - Create a new OAuth client in the [Google Cloud Console](https://console.cloud.google.com/apis/credentials).  Choose **Web application** and add your local callback URL (e.g. `http://localhost:3000/api/auth/callback/google`) to the authorised redirect URIs.
   - Enable the **YouTube Data API v3** and **YouTube Analytics API** for your project.
   - Copy the client ID and client secret into your `.env.local` file (see below).

4. **Set environment variables**

   Create a `.env.local` file in the root of this project and define the following variables:

   ```bash
   NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-public-anon-key
   SUPABASE_SERVICE_ROLE_KEY=your-service-role-key # used server-side for scheduled jobs
   OPENAI_API_KEY=your-openai-key

   YOUTUBE_CLIENT_ID=your-google-client-id
   YOUTUBE_CLIENT_SECRET=your-google-client-secret
   YOUTUBE_REDIRECT_URI=http://localhost:3000/api/auth/callback/google
   GOOGLE_API_SCOPES=https://www.googleapis.com/auth/youtube.readonly https://www.googleapis.com/auth/youtube.upload

   APP_URL=http://localhost:3000
   ```

5. **Run the development server**

   ```bash
   npm run dev
   ```

6. **Open your browser** at `http://localhost:3000`.  You should see the landing page with a sign‑in button.  After creating an account, head over to the **Settings** page to connect your YouTube channel.

## Architecture overview

The app uses the **Next.js App Router**.  Each page under `app/` is a React server component by default.  API requests that require secure handling (such as exchanging OAuth codes for tokens or writing to the database) are implemented as **server actions**.  This keeps sensitive logic off of the client and benefits from automatic route protection via Supabase’s row‑level security policies.

You’ll find helper modules in the `lib/` directory:

- **`supabaseClient.ts`** – a thin wrapper around `@supabase/supabase-js` that exposes both the client and server‑side helpers.  The server side uses `SUPABASE_SERVICE_ROLE_KEY` for full access in background jobs.
- **`youtube.ts`** – stubs for building OAuth URLs, exchanging auth codes for tokens, refreshing tokens, fetching channel data, uploading videos and scheduling their release.  These functions currently return dummy data; you will need to implement actual HTTP requests against Google’s endpoints (see `docs/api-notes.md`).
- **`ai.ts`** – (not yet implemented) a good place to put functions that call OpenAI or other models to generate recommendations.  You might design prompts in `docs/prompts.md`.

If you run into any issues setting up the project or understanding the flow, read through the markdown files in the `docs/` folder.  They contain detailed explanations of the build plan, rules for interacting with Cursor and notes about the YouTube API.

## Contributing

This scaffold is intentionally minimal so you can tailor it to your workflow.  Feel free to add components, hooks and services as needed.  If you discover bugs or have suggestions for improvement, please open an issue or submit a pull request.
